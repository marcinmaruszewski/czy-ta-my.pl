{"id":"czy-ta-my-0mo","title":"File Parsing \u0026 Metadata Extraction","description":"Description:\nImplement the backend pipeline to handle file uploads and convert them into our internal format.\n\nRequirements:\n- [ ] Create a Payload Hook (`beforeChange` on Books collection).\n- [ ] Support formats: **.docx, .pdf, .epub, .mobi**.\n- [ ] Use libraries like `mammoth`, `pdf-parse`, `epub-parser`.\n- [ ] **Text Extraction**: Parse raw text from the file.\n- [ ] **Cover Extraction**: If EPUB, extract the cover image and save it to the Media collection; link to Book.\n- [ ] **Encryption Workflow**: \n  1. Parse File -\u003e Text.\n  2. Encrypt Text (using Owner's derived key).\n  3. Save Encrypted Text to `encryptedContent`.\n  4. Create/Link `BookFamily`.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:10:07.236806044+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:25.062878799+01:00"}
{"id":"czy-ta-my-3mt","title":"Gamification: Timer \u0026 Badges","description":"Description:\nAdd engagement features.\n\nRequirements:\n- [ ] **Timer**: Visual timer in Reader (session duration).\n- [ ] **Tracking**: Log daily reading time in User profile.\n- [ ] **Badges**: Create Badges collection (Image, Rule).\n- [ ] **Awards**: Check rules on session end (e.g., 'Read 5 days in a row'). Award Badge to user.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:10:08.234655994+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:25.225080225+01:00"}
{"id":"czy-ta-my-4fb","title":"Reading Progress Sync","description":"Description:\nEnsure progress is saved and resumed correctly.\n\nRequirements:\n- [ ] Track current word index in the Reader.\n- [ ] **Save**: On exit or every N words, call API to update `ReadingProgress`.\n- [ ] **Resume**: On book load, start from saved index.\n- [ ] **Family Sync**: Ensure updates write to the shared `ReadingProgress` linked to the `BookFamily`, so all shared users see the update.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:10:07.852339349+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.368990894+01:00"}
{"id":"czy-ta-my-a8e","title":"Base Database Collections","description":"Description:\nDefine the core data schema in PayloadCMS.\n\nCollections to Implement:\n1. **Users**: Extend default Auth collection. Add fields to store Google 'sub' claim (for encryption key derivation).\n2. **BookFamily**: A grouping entity for shared copies of books.\n   - `readingProgress`: Relationship to ReadingProgress.\n3. **Books**: The actual book content.\n   - `title`: Text.\n   - `coverImage`: Upload/Relationship to Media.\n   - `originalFile`: Upload (restricted access).\n   - `encryptedContent`: Hidden text field (admin hidden).\n   - `owner`: Relationship to User.\n   - `bookFamily`: Relationship to BookFamily.\n4. **ReadingProgress**: Tracks reading state.\n   - `currentWordIndex`: Integer.\n   - `currentPage`: Integer.\n   - `user`: Relationship to User.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-02T18:10:06.869900469+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.036836496+01:00"}
{"id":"czy-ta-my-d6x","title":"Family Sharing Workflow","description":"Description:\nImplement the logic to share a book with another user (e.g., Spouse).\n\nRequirements:\n- [ ] UI: 'Share' button in Book details. Input: Email.\n- [ ] **Backend Action**:\n  1. Find Target User by Email.\n  2. Load Owner's Book.\n  3. Decrypt Content (Owner Key).\n  4. Re-encrypt Content (Target User Key).\n  5. Create **New Book Record** for Target User.\n  6. **Crucial**: Link new Book to the **EXISTING** `BookFamily` ID.\n- [ ] Result: Both users have their own 'Book' entry (encrypted for them), but share the same 'ReadingProgress'.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T18:10:08.045395808+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:25.403832682+01:00"}
{"id":"czy-ta-my-gvd","title":"Reader Interface (The App)","description":"Description:\nThe core reading experience 'Game'.\n\nRequirements:\n- [ ] Page: `/read/[id]`.\n- [ ] **Load**: Fetch Book -\u003e Decrypt `encryptedContent` server-side.\n- [ ] **Syllabize**: Split text into words, then use `SyllableService` to get syllables.\n- [ ] **UI**: Center screen display of current syllable.\n- [ ] **Controls**: Click / Touch / Spacebar triggers next syllable.\n- [ ] **Text Flow**: Syllable -\u003e Next Syllable -\u003e Next Word.\n- [ ] **Optimizations**: Prefetch next batch of words to prevent lag.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:10:07.708045976+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.55264768+01:00"}
{"id":"czy-ta-my-iqh","title":"Project Initialization \u0026 Infrastructure","description":"Description:\nInitialize the Next.js project with PayloadCMS 3.0 and configure core infrastructure.\n\nAcceptance Criteria:\n- [ ] PayloadCMS 3.0 installed and running in the Next.js App Router.\n- [ ] Vercel Postgres configured as the database adapter in `payload.config.ts`.\n- [ ] Vercel Blob (or S3) configured for file uploads.\n- [ ] Environment variables set up for local development.\n- [ ] Project builds and deploys to Vercel successfully.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-02T18:10:06.699643397+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.205037043+01:00"}
{"id":"czy-ta-my-o0n","title":"LLM Syllabification Service","description":"Description:\nImplement the syllabification logic using OpenRouter (LLM).\n\nRequirements:\n- [ ] Create `SyllableService`.\n- [ ] **Caching**: Check `SyllableDictionary` Payload collection first.\n- [ ] **LLM Call**: If not in cache, call OpenRouter (e.g., Google Flash/Haiku).\n  - Prompt: 'Split the Polish word \u003cWORD\u003e into syllables separated by dashes. Return ONLY the result.'\n- [ ] **Storage**: Save result to `SyllableDictionary`.\n- [ ] Handle errors/timeouts gracefully (fallback to simple heuristic if possible).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:10:07.392929001+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.875543488+01:00"}
{"id":"czy-ta-my-uc5","title":"Library Dashboard UI","description":"Description:\nCreate the main dashboard where users see their library.\n\nRequirements:\n- [ ] Page: `/dashboard` (Protected).\n- [ ] Fetch User's Books using Payload Local API.\n- [ ] Display Grid of Book Cards.\n  - Show Cover Image (or fallback).\n  - Show Title.\n  - Show Progress Bar (from linked `ReadingProgress`).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T18:10:07.543796956+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:24.704277109+01:00"}
{"id":"czy-ta-my-zpy","title":"Authentication \u0026 Encryption Service","description":"Description:\nImplement secure Google Authentication and client-side encryption logic.\n\nRequirements:\n- [ ] Verify NextAuth/Payload Google Provider is working.\n- [ ] **Key Derivation**: Implement logic to derive a symmetric encryption key (AES-256) using a combination of the User's Google 'sub' claim and a server-side secret.\n- [ ] **Crypto Utils**: Create `src/lib/encryption.ts` with:\n  - `encryptText(text: string, userKey: string): string`\n  - `decryptText(encrypted: string, userKey: string): string`\n- [ ] Ensure encryption keys are NEVER stored in the database.\n- [ ] Ensure content is encrypted BEFORE saving to the DB.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-02T18:10:07.038832973+01:00","created_by":"mmarus03","updated_at":"2026-01-02T18:11:23.862085287+01:00"}
